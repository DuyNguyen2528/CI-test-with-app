{"ast":null,"code":"import mongoose from\"mongoose\";import{useState}from\"react\";import{Is_User_Name_Exist}from\"./Utilities\";import{FetchPostUser}from\"./httpUltilities\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Signup(_ref){let{closeForm,LoginSuccess}=_ref;const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState(null);function CreateAccount(account){Is_User_Name_Exist(username).then(exist=>{//If User name already exits alert\nif(exist){//alert(\"Username already exist\");\nsetError('Account already exist');//setError(null);\n}// else if username not exits then create an account on data\nelse{FetchPostUser(account).then(res=>{if(res.status===500){setError(\"error 500\");throw error(\"PostUser error 500\");}else{alert(\"Account created successful\");LoginSuccess();}}).catch(error=>{console.log(error);});}}).catch(error=>{console.log(\"Is_User_Name_Exist() error\");});}function handleSignup(e){e.preventDefault();setError(null);if(!username||!password){setError('Username and password are required.');return;}else{const account={\"username\":username,\"password\":password};//console.log(\"account= \" , account);\nCreateAccount(account);/* if(!Is_User_Name_Exist(username)) {\r\n        console.log(\"creating account\");\r\n        postUser(account).\r\n        then((res) => {\r\n        //console.log(res.status);\r\n        if(res.status === 500) {\r\n          throw new Error(\"error ading user\");\r\n        }\r\n        else {\r\n          console.log(res.json());\r\n          return res.json();\r\n        }\r\n        \r\n        }).then((data) => {\r\n\r\n          alert(`Sign up successful`);\r\n        }).catch((error) => {\r\n          console.log(\"catching error:\", error);\r\n        })\r\n      }\r\n      else {\r\n        //alert(\"Username already exsits\");\r\n      } */}}return/*#__PURE__*/_jsxs(\"div\",{className:\"Signup-Form\",id:\"myForm\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"Signup-header\",children:\"Sign Up\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"Signup-form\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"login-label\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Username\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter Username\",name:\"username\",required:true,value:username,onChange:e=>{setUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"login-label\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Password\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Enter Password\",name:\"password\",required:true,value:password,onChange:e=>{setPassword(e.target.value);}}),error&&/*#__PURE__*/_jsx(\"p\",{className:`signup-error-message ${error?'animate':''}`,children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login-button\",onClick:handleSignup,children:\"Sign up\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn cancel\",onClick:closeForm,children:\"Close\"})]})]});}export default Signup;","map":{"version":3,"names":["mongoose","useState","Is_User_Name_Exist","FetchPostUser","jsx","_jsx","jsxs","_jsxs","Signup","_ref","closeForm","LoginSuccess","username","setUsername","password","setPassword","error","setError","CreateAccount","account","then","exist","res","status","alert","catch","console","log","handleSignup","e","preventDefault","className","id","children","type","placeholder","name","required","value","onChange","target","onClick"],"sources":["D:/csc-307/CI-test/CSC-307-TA/packages/frontend/src/components/Signup.jsx"],"sourcesContent":["import mongoose from \"mongoose\";\r\nimport { useState } from \"react\";\r\nimport {Is_User_Name_Exist} from \"./Utilities\"\r\nimport {FetchPostUser} from \"./httpUltilities\"\r\n\r\nfunction Signup({ closeForm, LoginSuccess }) {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState(null);\r\n\r\n\r\n\r\n\r\n  function CreateAccount(account) {\r\n    Is_User_Name_Exist(username).\r\n      then((exist) => { \r\n        //If User name already exits alert\r\n        if(exist) {\r\n         //alert(\"Username already exist\");\r\n         setError('Account already exist');\r\n         //setError(null);\r\n        }\r\n        // else if username not exits then create an account on data\r\n        else {\r\n          FetchPostUser(account).\r\n          then((res) => {\r\n            if(res.status === 500) {\r\n              setError(\"error 500\")\r\n              throw error(\"PostUser error 500\");\r\n            }\r\n            else {\r\n              alert(\"Account created successful\");\r\n              LoginSuccess();\r\n            }\r\n          }).\r\n          catch((error) => {\r\n            console.log(error);\r\n          })\r\n        }\r\n      }).\r\n      catch((error) => {console.log(\"Is_User_Name_Exist() error\")});\r\n  }\r\n\r\n  function handleSignup(e) {\r\n    e.preventDefault();\r\n    setError(null);\r\n    if (!username || !password) {\r\n      setError('Username and password are required.');\r\n      return;\r\n    }\r\n\r\n    else  {\r\n      const account = {\"username\": username, \"password\": password}\r\n      //console.log(\"account= \" , account);\r\n      CreateAccount(account);\r\n      \r\n      /* if(!Is_User_Name_Exist(username)) {\r\n        console.log(\"creating account\");\r\n        postUser(account).\r\n        then((res) => {\r\n        //console.log(res.status);\r\n        if(res.status === 500) {\r\n          throw new Error(\"error ading user\");\r\n        }\r\n        else {\r\n          console.log(res.json());\r\n          return res.json();\r\n        }\r\n        \r\n        }).then((data) => {\r\n\r\n          alert(`Sign up successful`);\r\n        }).catch((error) => {\r\n          console.log(\"catching error:\", error);\r\n        })\r\n      }\r\n      else {\r\n        //alert(\"Username already exsits\");\r\n      } */\r\n  }\r\n}\r\n\r\n\r\n  return (\r\n\r\n    <div className=\"Signup-Form\" id=\"myForm\">\r\n\r\n      <h1 className=\"Signup-header\">Sign Up</h1>\r\n      <form className=\"Signup-form\">\r\n        <label className=\"login-label\" ><b>Username</b></label>\r\n        <input type=\"text\" placeholder=\"Enter Username\" name=\"username\" required value={username} onChange={(e) => { setUsername(e.target.value)  }} ></input>\r\n\r\n        <label className=\"login-label\" ><b>Password</b></label>\r\n        <input type=\"password\" placeholder=\"Enter Password\" name=\"password\" required value={password} onChange={(e) => { setPassword(e.target.value)}} ></input>\r\n        {error && <p className={`signup-error-message ${error ? 'animate' : ''}`}>{error}</p>}\r\n        <button type=\"submit\" className=\"login-button\" onClick={handleSignup}>Sign up</button>\r\n        <button type=\"button\" className=\"btn cancel\" onClick={closeForm} >Close</button>\r\n      </form>\r\n    </div>\r\n  )\r\n\r\n}\r\nexport default Signup"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}